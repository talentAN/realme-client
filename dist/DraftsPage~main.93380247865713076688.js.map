{"version":3,"sources":["webpack:///./src/pages/Drafts.tsx","webpack:///./src/components/QuickLinks.tsx","webpack:///./src/components/DraftCard.tsx"],"names":["useStyles","makeStyles","root","flexGrow","maxWidth","display","justifyContent","draftsContainer","width","ChapterWidth","draftNav","draftList","props","classes","setDiaLog","Draft","drafts","setDrafts","queryParams","setQueryParams","onDelete","draft","open","contexts","onConfirm","id","type","del","draftType","then","res","status","isCancelable","useEffect","query","offset","length","datas","data","className","value","indicatorColor","textColor","onChange","e","val","label","map","editLink","location","pathname","key","title","content","lastmodified","variant","component","size","onClick","href","target","rel"],"mappings":"2+DAAA,mBACA,YACA,eACA,eACA,YACA,YACA,eACA,eACA,YAEMA,EAAY,EAAAC,WAAW,CAC3BC,KAAM,CACJC,SAAU,EACVC,SAAU,SACVC,QAAS,OACTC,eAAgB,iBAElBC,gBAAiB,CACfC,MAAO,EAAAC,cAETC,SAAU,GACVC,UAAW,KA+Eb,UA3Ee,SAACC,GACd,IAAMC,EAAUb,EAAU,IACnBc,EAAA,4BAAAA,UAEAC,EAAA,+BAAAA,MACD,iBAACC,EAAA,KAAQC,EAAA,KACT,6CAACC,EAAA,KAAaC,EAAA,KAcdC,EAAW,SAACC,GAChBP,EAAU,CACRQ,MAAM,EACNC,SAAU,SACVC,UAAW,WAAM,OAhBT,SAAOH,GAAU,0C,0CACpBI,EAAYJ,EAAK,GAAbK,EAAQL,EAAK,KACxBN,EAAMY,IAAI,CAACF,GAAE,EAAEG,UAAWF,IAAOG,MAAK,SAACC,GACjCA,GAAsB,MAAfA,EAAIC,QACbjB,EAAU,CACRQ,MAAM,EACNC,SAAU,GACVS,cAAc,O,UASDL,CAAIN,IACrBW,cAAc,KAiBlB,OAdA,EAAAC,WAAU,WACM,mC,0DACA,SAAMlB,EAAMmB,MAAM,CAC5BR,KAAM,QACNS,OAAQjB,EAAYiB,OACpBC,OAlCe,GAmCfR,UAAWV,EAAYU,a,cAJnBE,EAAM,UAMNO,EAAQP,GAAOA,EAAIQ,MAAQR,EAAIQ,KAAKA,OACjCrB,EAAUoB,G,aAIpB,CAACnB,IAEF,+BAAKqB,UAAW1B,EAAQX,MACtB,+BAAKqC,UAAW1B,EAAQN,iBACtB,wBAAC,UAAI,CACHiC,MAAOtB,EAAYU,UACnBa,eAAe,UACfC,UAAU,UACVC,SAAU,SAACC,EAAQC,GAAa,OAAA1B,EAAe,EAAD,KAAKD,GAAW,CAAEiB,OAAQU,OAExE,wBAAC,UAAG,CAACC,MAAM,WAAWN,MAAM,aAC5B,wBAAC,UAAG,CAACM,MAAM,UAAUN,MAAM,aAE7B,+BAAKD,UAAW1B,EAAQH,WACxB,+BAAK6B,UAAW1B,EAAQF,WACrBK,EAAOoB,OACN,gDACGpB,EAAO+B,KAAI,SAAC1B,GACX,IAAM2B,EAAcpC,EAAMqC,SAASC,SAAQ,IAAI7B,EAAMI,GAAE,QACvD,OACE,wBAAC,UAAS,CAAC0B,IAAK9B,EAAMI,GAAIJ,MAAOA,EAAO2B,SAAUA,EAAU5B,SAAUA,QAK5E,mDAIN,wBAAC,UAAU,S,uKC/FjB,mBACA,eACA,eACA,eACA,eACA,eAYA,UAVmB,WACjB,OACE,wBAAC,UAAM,KACL,wBAAC,UAAI,MACL,wBAAC,UAAU,MACX,wBAAC,UAAO,MACR,wBAAC,UAAM,S,uKCbb,mBACA,eACA,eACA,eACA,eACA,eACA,eAoBA,UAnBkB,SAACR,GACT,IAAAS,EAAA,EAAAA,MAAO2B,EAAA,EAAAA,SAAU5B,EAAA,EAAAA,SACjBgC,EAAA,EAAAA,MAAOC,EAAA,EAAAA,QAASC,EAAA,EAAAA,aACxB,OACE,wBAAC,UAAI,KACH,wBAAC,UAAU,CAACF,MAAOA,IACnB,wBAAC,UAAW,KACV,wBAAC,UAAU,CAACG,QAAQ,QAAQC,UAAU,KACnCH,IAGL,wBAAC,UAAW,KACV,wBAAC,UAAM,CAACI,KAAK,QAAQC,QAAS,WAAM,OAAAtC,EAASC,KAAM,MACnD,6BAAGsC,KAAMX,EAAUY,OAAO,SAASC,IAAI,uBAAqB,MAC5D,oCAAOP","file":"DraftsPage~main.93380247865713076688.js","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport {requestContext} from '../contexts/request';\nimport {rootContext} from '../contexts/RootContext';\nimport QuickLinks from '../components/QuickLinks';\nimport DraftCard from '../components/DraftCard';\nimport {ChapterWidth} from '../utils/Layout';\n\nconst useStyles = makeStyles({\n  root: {\n    flexGrow: 1,\n    maxWidth: '1200px',\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n  draftsContainer: {\n    width: ChapterWidth,\n  },\n  draftNav: {},\n  draftList: {},\n});\n\nconst DEFAULT_LENGTH = 30;\nconst Drafts = (props: any) => {\n  const classes = useStyles({});\n  const {setDiaLog} = useContext(rootContext);\n\n  const {Draft} = useContext(requestContext);\n  const [drafts, setDrafts] = useState([]);\n  const [queryParams, setQueryParams] = useState({offset: 0, draftType: 'chapter'});\n\n  const del = async (draft: any) => {\n    const {id, type} = draft;\n    Draft.del({id, draftType: type}).then((res: any) => {\n      if (res && res.status === 200) {\n        setDiaLog({\n          open: false,\n          contexts: '',\n          isCancelable: false,\n        });\n      }\n    });\n  };\n  const onDelete = (draft: any) => {\n    setDiaLog({\n      open: true,\n      contexts: '确认要删除?',\n      onConfirm: () => del(draft),\n      isCancelable: true,\n    });\n  };\n  useEffect(() => {\n    const query = async () => {\n      const res = await Draft.query({\n        type: 'query',\n        offset: queryParams.offset,\n        length: DEFAULT_LENGTH,\n        draftType: queryParams.draftType,\n      });\n      const datas = res && res.data && res.data.data;\n      datas && setDrafts(datas);\n    };\n    query();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [queryParams]);\n  return (\n    <div className={classes.root}>\n      <div className={classes.draftsContainer}>\n        <Tabs\n          value={queryParams.draftType}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          onChange={(e: any, val: any) => setQueryParams({...queryParams, offset: val})}\n        >\n          <Tab label=\"timeline\" value=\"timeline\" />\n          <Tab label=\"chapter\" value=\"chapter\" />\n        </Tabs>\n        <div className={classes.draftNav}></div>\n        <div className={classes.draftList}>\n          {drafts.length ? (\n            <>\n              {drafts.map((draft: any) => {\n                const editLink = `${props.location.pathname}/${draft.id}/edit`;\n                return (\n                  <DraftCard key={draft.id} draft={draft} editLink={editLink} onDelete={onDelete} />\n                );\n              })}\n            </>\n          ) : (\n            <></>\n          )}\n        </div>\n      </div>\n      <QuickLinks />\n    </div>\n  );\n};\n\nexport default Drafts;\n","import React from \"react\";\nimport Sticks from \"./Sticks\";\nimport Edit from \"../components/stick/Edit\";\nimport NavList from \"../components/stick/NavList\";\nimport AuthCenter from \"../components/stick/AuthCenter\";\nimport Footer from \"../components/stick/Footer\";\n\nconst QuickLinks = () => {\n  return (\n    <Sticks>\n      <Edit />\n      <AuthCenter />\n      <NavList />\n      <Footer />\n    </Sticks>)\n}\n\nexport default QuickLinks","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nconst DraftCard = (props: any) => {\n  const { draft, editLink, onDelete } = props;\n  const { title, content, lastmodified } = draft;\n  return (\n    <Card >\n      <CardHeader title={title} />\n      <CardContent>\n        <Typography variant=\"body2\" component=\"p\">\n          {content}\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <Button size=\"small\" onClick={() => onDelete(draft)}>删除</Button>\n        <a href={editLink} target='_blank' rel=\"noopener noreferrer\">编辑</a>\n        <span>{lastmodified}</span>\n      </CardActions>\n    </Card>\n  )\n}\nexport default DraftCard"],"sourceRoot":""}