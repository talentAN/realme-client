{"version":3,"sources":["webpack:///./src/pages/DraftEditor.tsx","webpack:///./src/components/ChapterEditor.tsx"],"names":["Draft","id","setID","useEffect","add","genID","then","data","status","title","content","useStyles","makeStyles","theme","root","display","flexDirection","margin","spacing","width","WriteEditorWidth","textFieldRoot","marginBottom","props","useTheme","classes","_title","setTitle","_content","setContent","saveTemp","useRef","debounce","update","current","className","value","onChange","e","target","variant","placeholder","style","minHeight","maxHeight","onClick","publish","window","location","pathname","CHAPTER","color"],"mappings":"0YAAA,mBACA,eACA,YACA,YAeA,UAboB,WACX,IAAAA,EAAA,+BAAAA,MACD,iBAACC,EAAA,KAAIC,EAAA,KASX,OARA,EAAAC,WAAU,WACRH,EAAMI,IAAI,CAACH,GAAI,EAAAI,UAAUC,MAAK,SAACC,GACzBA,GAAwB,YAAhBA,EAAKC,QACfN,EAAMK,EAAKN,SAId,IACI,wBAAC,UAAM,CAACA,GAAIA,EAAIQ,MAAO,GAAIC,QAAS,O,gVChB7C,mBACA,YACA,eACA,eACA,eACA,UACA,gBACA,YACA,YACA,YACMC,EAAY,EAAAC,YAAW,SAAAC,GAAS,OACpCC,KAAM,CACJC,QAAS,OACTC,cAAe,SACfC,OAAQJ,EAAMK,QAAQ,EAAG,GACzBC,MAAO,EAAAC,kBAETC,cAAe,CACbC,aAAcT,EAAMK,QAAQ,QA4ChC,UAxCsB,SAACK,GACrB,IAAMV,EAAQ,EAAAW,WACPxB,EAAA,+BAAAA,MACDyB,EAAUd,EAAU,IACnBV,EAAA,EAAAA,GAAI,IAAAQ,aAAA,IAAQ,EAAR,KAAY,IAAAC,eAAA,IAAU,EAAV,KACjB,gBAACgB,EAAA,KAAQC,EAAA,KACT,gBAACC,EAAA,KAAUC,EAAA,KACXC,EAAW,EAAAC,OAAO,EAAAC,SAAShC,EAAMiC,OAAQ,MAC/C,EAAA9B,WAAU,WACR2B,EAASI,QAAQ,CAACjC,GAAE,EAAEQ,MAAOiB,EAAQhB,QAASkB,MAE7C,CAACF,EAAQE,IAQZ,OACE,+BAAKO,UAAWV,EAAQX,MACtB,wBAAC,UAAS,CACRsB,MAAOV,EACPW,SAAU,SAACC,GAAW,OAAAX,EAASW,EAAEC,OAAOH,QACxCI,QAAQ,WACRC,YA1BiB,eA2BjBhB,QAAS,CAACX,KAAMW,EAAQJ,iBAE1B,wBAAC,UAAU,CACTR,MAAM,OACNuB,MAAOR,EACPS,SAAUR,EACVa,MAAO,CAACpB,aAAcT,EAAMK,QAAQ,GAAIyB,UAAW,MAAOC,UAAW,SAEvE,wBAAC,UAAM,CAACC,QAtBI,WACd7C,EAAM8C,QAAQ7C,GAAIK,MAAK,SAACC,GAClBA,GAAwB,YAAhBA,EAAKC,SACfuC,OAAOC,SAASC,SAAc,EAAAC,QAAO,IAAI3C,EAAKN,QAmBtBuC,QAAQ,YAAYW,MAAM,WAAS","file":"DraftEditorPage~main.6e0d40cf90b72ea9d11a.js","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport Editor from '../components/ChapterEditor';\nimport {requestContext} from '../contexts/request';\nimport {genID} from '../utils/Helpers';\n\nconst DraftEditor = () => {\n  const {Draft} = useContext(requestContext);\n  const [id, setID] = useState('');\n  useEffect(() => {\n    Draft.add({id: genID()}).then((data: any) => {\n      if (data && data.status === 'success') {\n        setID(data.id);\n      }\n    });\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return <Editor id={id} title={''} content={''} />;\n};\nexport default DraftEditor;\n","import React, {useState, useEffect, useContext, useRef} from 'react';\nimport {makeStyles, useTheme} from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport ReactQuill from 'react-quill';\nimport Button from '@material-ui/core/Button';\nimport 'react-quill/dist/quill.snow.css';\nimport {requestContext} from '../contexts/request';\nimport {WriteEditorWidth} from '../utils/Layout';\nimport {debounce} from '../utils/Helpers';\nimport {CHAPTER} from '../utils/consts/Route';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: theme.spacing(6, 0),\n    width: WriteEditorWidth,\n  },\n  textFieldRoot: {\n    marginBottom: theme.spacing(1),\n  },\n}));\nconst text_placeholder = '请输入标题，最多50个字';\nconst ChapterEditor = (props: any) => {\n  const theme = useTheme();\n  const {Draft} = useContext(requestContext);\n  const classes = useStyles({});\n  const {id, title = '', content = ''} = props;\n  const [_title, setTitle] = useState(title);\n  const [_content, setContent] = useState(content);\n  const saveTemp = useRef(debounce(Draft.update, 1000));\n  useEffect(() => {\n    saveTemp.current({id, title: _title, content: _content});\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [_title, _content]);\n  const publish = () => {\n    Draft.publish(id).then((data: any) => {\n      if (data && data.status === 'success') {\n        window.location.pathname = `${CHAPTER}/${data.id}`;\n      }\n    });\n  };\n  return (\n    <div className={classes.root}>\n      <TextField\n        value={_title}\n        onChange={(e: any) => setTitle(e.target.value)}\n        variant=\"outlined\"\n        placeholder={text_placeholder}\n        classes={{root: classes.textFieldRoot}}\n      />\n      <ReactQuill\n        theme=\"snow\"\n        value={_content}\n        onChange={setContent}\n        style={{marginBottom: theme.spacing(8), minHeight: '50%', maxHeight: '80%'}}\n      />\n      <Button onClick={publish} variant=\"contained\" color=\"primary\">\n        发布\n      </Button>\n    </div>\n  );\n};\nexport default ChapterEditor;\n"],"sourceRoot":""}