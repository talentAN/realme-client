{"version":3,"sources":["webpack:///./src/utils/Formatter.ts","webpack:///./src/components/common/Spinner.tsx","webpack:///./src/components/common/CardActions/Hug.tsx","webpack:///./src/components/common/CardActions/ShowLess.tsx","webpack:///./src/components/common/Spinner.scss","webpack:///./src/pages/containers/Chapters.style.ts","webpack:///./src/components/common/ChapterCard.tsx","webpack:///./src/components/common/CardActions/index.tsx","webpack:///./src/pages/containers/Landing.style.ts","webpack:///./src/pages/containers/Chapters.tsx","webpack:///./src/components/common/CardActions/Like.tsx","webpack:///./src/components/common/Spinner.scss?1c84","webpack:///./src/components/common/CardActions/Collect.tsx","webpack:///./src/components/common/ChapterCard.style.ts","webpack:///./src/components/common/CornerButtons.tsx","webpack:///./src/pages/containers/Landing.tsx"],"names":["FormatStr","key","str","numFormatter","num","type","target","filter","item","format","className","useStyles","makeStyles","theme","readed","width","height","display","justifyContent","alignItems","color","palette","primary","main","borderRadius","spacing","fontWeight","border","cursor","backgroundColor","light","customIcon","marginRight","fontSize","huged","text","hint","props","classes","Chapter","id","is_huged","num_huged","_is_huged","setIsHuged","_num_huged","setNumHuged","onClick","request","hug","root","genBaseStyle","collapsedText","setIsShowMore","hover","exports","___CSS_LOADER_API_IMPORT___","push","module","i","ChaptersStyle","flexGrow","maxWidth","ChapterWidth","flexDirection","chapter","title","content","is_show_more","customCardRoot","contentOut","contentIn","readMore","size","actions","customActionRoot","_isActionExit","action","some","a","num_liked","num_collected","is_liked","is_collected","is_hug_exist","is_like_exist","is_collect_exist","minWidth","LandingContainerMinWidth","padding","background","paper","chapters","loading","map","index","Fragment","selected","iconWrapper","user","_is_liked","setIsLiked","isGuest","window","location","pathname","LOGIN","dangerouslySetInnerHTML","__html","LikeSvg","api","__esModule","default","options","locals","_is_collected","setIsCollected","CollectSvg","marginBottom","wordWrap","wordBreak","Number","parseInt","overflow","textOverflow","float","position","right","bottom","button","margin","backgroundPosition","backgroundRepeat","CornerButtonsConfig","config","linkToMethod","svg","linkTo","open","style","backgroundImage","setLoading","setChapters","offset","setOffset","fetchNewChapters","useCallback","limit","len_query","newChapters","useEffect","_fetch","clientHeight","document","documentElement","scrollHeight","scrollTop","newOffset","length","addEventListener","removeEventListener"],"mappings":"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","file":"LandingPage~main.f8907bf7c21d809d1935.js","sourcesContent":["import { format } from \"d3-format\";\n\nconst FormatStr: any[] = [\n  { key: \"int\", str: \",.0f\" },\n  { key: \"float\", str: \",.2f\" },\n  { key: \"si\", str: \",.2s\" },\n  { key: \"percent\", str: \",.2%\" }\n];\n\nexport const numFormatter = (num: number, type?: any) => {\n  if (type) {\n    const target =\n      FormatStr.filter((item: any) => item.key === type)[0] || FormatStr[0];\n    return format(FormatStr[target.str])(num);\n  }\n  if (num < 1000) {\n    return format(FormatStr[0].str)(num);\n  }\n  if (num > 1000) {\n    return format(FormatStr[2].str)(num);\n  }\n};","import React, { FC } from \"react\";\nimport \"./Spinner.scss\";\n\nconst Spinner: FC = () => {\n  return <div className=\"spinner\" />;\n};\n\nexport default Spinner;\n","import React, {useState, useContext} from 'react';\nimport clsx from 'clsx';\nimport {makeStyles} from '@material-ui/core/styles';\nimport AccessibilityIcon from '@material-ui/icons/Accessibility';\nimport {requestContext} from '../../../contexts/request';\nimport {numFormatter} from '../../../utils/Formatter';\n\nconst useStyles = makeStyles(theme => ({\n  readed: {\n    width: '100px',\n    height: '32px',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: theme.palette.primary.main,\n    borderRadius: theme.spacing(1),\n    fontWeight: 'bold',\n    border: 'solid 1px',\n    cursor: 'pointer',\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  customIcon: {\n    marginRight: '2px',\n    fontSize: '1rem',\n    width: '1.2rem',\n    height: '1.2rem',\n  },\n  huged: {\n    backgroundColor: theme.palette.primary.main,\n    color: `${theme.palette.text.hint} !important`,\n    border: 'transparent !important',\n  },\n}));\nconst Hug = (props: any) => {\n  const classes = useStyles({});\n  const {Chapter} = useContext(requestContext);\n  const {id, is_huged, num_huged = 0} = props;\n  const [_is_huged, setIsHuged] = useState(is_huged);\n  const [_num_huged, setNumHuged] = useState(num_huged);\n  const onHugClick = () => {\n    setIsHuged(!_is_huged);\n    setNumHuged(_is_huged ? _num_huged - 1 : _num_huged + 1);\n    if (!_is_huged) {\n      const request = Chapter.hug;\n      request(id);\n    }\n  };\n  return (\n    <div className={clsx(classes.readed, {[classes.huged]: _is_huged})} onClick={onHugClick}>\n      <AccessibilityIcon classes={{root: clsx(classes.customIcon)}} />\n      <span>{`hug ${numFormatter(_num_huged)}`}</span>\n    </div>\n  );\n};\n\nexport default Hug;\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport {genBaseStyle} from '../../../utils/consts/theme';\n\nconst useStyles = makeStyles(theme => ({\n  ...genBaseStyle(theme),\n  collapsedText: {\n    display: 'flex',\n    justifyContent: 'start',\n    alignItems: 'center',\n    fontSize: '14px',\n  },\n  customIcon: {\n    marginRight: '2px',\n    fontSize: '1rem',\n    width: '1.2rem',\n    height: '1.2rem',\n  },\n}));\nconst ShowLess = (props: any) => {\n  const classes = useStyles({});\n  const {setIsShowMore} = props;\n\n  return (\n    <IconButton\n      classes={{root: clsx(classes.collapsedText, classes.hover)}}\n      onClick={() => {\n        setIsShowMore(false);\n      }}\n    >\n      <span>收起</span>\n      <ExpandLessIcon classes={{root: classes.customIcon}} />\n    </IconButton>\n  );\n};\n\nexport default ShowLess;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".spinner{display:inline-block;width:64px;height:64px}.spinner:after{content:\\\" \\\";display:block;width:46px;height:46px;margin:1px;border-radius:50%;border:5px solid #fff;border-color:#fff transparent #fff transparent;animation:spinner 0.8s linear infinite}@keyframes spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { ChapterWidth } from \"../../utils/Layout\";\n\nconst ChaptersStyle = {\n  root: {\n    flexGrow: 1,\n    display: \"flex\",\n    maxWidth: ChapterWidth,\n    alignItems: \"center\",\n    flexDirection: \"column\"\n  }\n};\n\nexport default ChaptersStyle","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\n\nimport CardContent from '@material-ui/core/CardContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CardActions from './CardActions';\nimport genChapterCardStyle from './ChapterCard.style';\n\nconst ChapterCard = (props: any) => {\n  const classes = makeStyles(theme => genChapterCardStyle(theme) as any)() as any;\n  const {chapter} = props;\n  const {title, content} = chapter;\n  const [is_show_more, setIsShowMore] = useState(false);\n  const onShowMoreClick = () => {\n    setIsShowMore(true);\n  };\n\n  return (\n    <Card classes={{root: classes.customCardRoot}}>\n      <CardHeader title={title} />\n      <CardContent>\n        <div\n          className={clsx(classes.content, is_show_more ? classes.contentOut : classes.contentIn)}\n        >\n          {content}\n        </div>\n        {!is_show_more && (\n          <IconButton\n            classes={{root: clsx(classes.readMore, classes.hover)}}\n            onClick={onShowMoreClick}\n            size=\"medium\"\n          >\n            <span>阅读更多</span>\n            <ExpandMoreIcon />\n          </IconButton>\n        )}\n      </CardContent>\n      <CardActions\n        {...chapter}\n        is_show_more={is_show_more}\n        setIsShowMore={setIsShowMore}\n        actions={['hug', 'like', 'collect']}\n      />\n    </Card>\n  );\n};\n\nexport default ChapterCard;\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport MuiCardActions from '@material-ui/core/CardActions';\nimport Hug from './Hug';\nimport Like from './Like';\nimport Collect from './Collect';\nimport ShowLess from './ShowLess';\nconst useStyles = makeStyles({\n  customActionRoot: {\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    fontSize: '14px',\n  },\n  actions: {\n    display: 'flex',\n    justifyContent: 'start',\n    alignItems: 'center',\n  },\n});\nconst _isActionExit = (action: string, actions: string[]) => actions.some(a => a === action);\nconst CardActions = (props: any) => {\n  const classes = useStyles({});\n  const {\n    id,\n    actions,\n    is_show_more,\n    setIsShowMore,\n    num_huged = 0,\n    num_liked,\n    num_collected,\n    is_huged = false,\n    is_liked,\n    is_collected,\n  } = props;\n  const is_hug_exist = _isActionExit('hug', actions);\n  const is_like_exist = _isActionExit('like', actions);\n  const is_collect_exist = _isActionExit('collect', actions);\n\n  return (\n    <MuiCardActions classes={{root: classes.customActionRoot}}>\n      <div className={classes.actions}>\n        {is_hug_exist && <Hug id={id} is_huged={is_huged} num_huged={num_huged} />}\n        {is_like_exist && <Like id={id} is_liked={is_liked} num_liked={num_liked} />}\n        {is_collect_exist && (\n          <Collect id={id} is_collected={is_collected} num_collected={num_collected} />\n        )}\n      </div>\n      {is_show_more && <ShowLess setIsShowMore={setIsShowMore} />}\n    </MuiCardActions>\n  );\n};\nexport default CardActions;\n","import { LandingContainerMinWidth } from \"../../utils/Layout\";\n\nconst genLandingStyle = (theme: any) => {\n  return {\n    root: {\n      flexGrow: 1,\n      minWidth: LandingContainerMinWidth,\n      padding: theme.spacing(2),\n      display: \"flex\",\n      justifyContent: \"center\",\n      backgroundColor: theme.palette.background.paper\n    },\n    content: {\n      flexGrow: 1,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      maxWidth: LandingContainerMinWidth,\n    }\n  }\n};\n\nexport default genLandingStyle;\n","import React, {Fragment} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Spinner from '../../components/common/Spinner';\nimport ChapterCard from '../../components/common/ChapterCard';\nimport ChaptersStyle from './Chapters.style';\n\nconst Chapters = (props: any) => {\n  const classes = makeStyles(ChaptersStyle as any)();\n  const {chapters, loading, actions} = props;\n  return (\n    <div className={classes.root}>\n      {chapters.map((chapter: any, index: number) => {\n        return (\n          <Fragment key={index}>\n            <ChapterCard chapter={chapter} actions={actions} />\n          </Fragment>\n        );\n      })}\n      {loading && <Spinner />}\n    </div>\n  );\n};\n\nexport default Chapters;\n","import React, {useState, useContext} from 'react';\nimport clsx from 'clsx';\nimport {makeStyles} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport {LikeSvg} from '../../../utils/Svg';\nimport {genBaseStyle} from '../../../utils/consts/theme';\nimport {rootContext} from '../../../contexts/RootContext';\nimport {requestContext} from '../../../contexts/request';\nimport {LOGIN} from '../../../utils/consts/Route';\nimport {isGuest} from '../../../utils/helpers/user';\n\nconst useStyles = makeStyles(theme => ({\n  ...genBaseStyle(theme),\n  collapsedText: {\n    display: 'flex',\n    justifyContent: 'start',\n    alignItems: 'center',\n    fontSize: '14px',\n  },\n  selected: {\n    color: theme.palette.primary.main,\n  },\n  iconWrapper: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '19.19px',\n    height: '19.19px',\n  },\n}));\nconst Like = (props: any) => {\n  const classes = useStyles({});\n  const {user} = useContext(rootContext);\n  const {Chapter} = useContext(requestContext);\n  const {is_liked, id} = props;\n  const [_is_liked, setIsLiked] = useState(is_liked);\n\n  const onLikeClick = () => {\n    if (isGuest(user)) {\n      window.location.pathname = LOGIN;\n      return;\n    }\n    setIsLiked(!_is_liked);\n    const request = Chapter[_is_liked ? 'cancelLike' : 'like'];\n    request(id);\n  };\n  return (\n    <IconButton\n      classes={{\n        root: clsx(classes.collapsedText, classes.hover, {[classes.selected]: _is_liked}),\n      }}\n      onClick={onLikeClick}\n    >\n      <div dangerouslySetInnerHTML={{__html: LikeSvg}} className={classes.iconWrapper} />\n      <span>like</span>\n    </IconButton>\n  );\n};\n\nexport default Like;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./Spinner.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","import React, {useState, useContext} from 'react';\nimport clsx from 'clsx';\nimport {makeStyles} from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport {requestContext} from '../../../contexts/request';\nimport {rootContext} from '../../../contexts/RootContext';\nimport {CollectSvg} from '../../../utils/Svg';\nimport {genBaseStyle} from '../../../utils/consts/theme';\nimport {isGuest} from '../../../utils/helpers/user';\nimport {LOGIN} from '../../../utils/consts/Route';\nconst useStyles = makeStyles(theme => ({\n  ...genBaseStyle(theme),\n  collapsedText: {\n    display: 'flex',\n    justifyContent: 'start',\n    alignItems: 'center',\n    fontSize: '14px',\n  },\n  selected: {\n    color: theme.palette.primary.main,\n  },\n  iconWrapper: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '19.19px',\n    height: '19.19px',\n  },\n}));\nconst Collect = (props: any) => {\n  const classes = useStyles({});\n  const {user} = useContext(rootContext);\n  const {Chapter} = useContext(requestContext);\n  const {is_collected, id} = props;\n  const [_is_collected, setIsCollected] = useState(is_collected);\n\n  const onCollectClick = () => {\n    if (isGuest(user)) {\n      window.location.pathname = LOGIN;\n      return;\n    }\n    setIsCollected(!_is_collected);\n    const request = Chapter[_is_collected ? 'cancelCollect' : 'collect'];\n    request(id);\n  };\n  return (\n    <IconButton\n      classes={{\n        root: clsx(classes.collapsedText, classes.hover, {[classes.selected]: _is_collected}),\n      }}\n      onClick={onCollectClick}\n    >\n      <div dangerouslySetInnerHTML={{__html: CollectSvg}} className={classes.iconWrapper} />\n      <span>collect</span>\n    </IconButton>\n  );\n};\n\nexport default Collect;\n","import {Theme} from '@material-ui/core/styles';\nimport {genBaseStyle} from '../../utils/consts/theme';\nimport {ChapterWidth} from '../../utils/Layout';\n\nconst genChapterCardStyle = (theme: Theme) => {\n  return {\n    ...genBaseStyle(theme),\n    customCardRoot: {\n      maxWidth: ChapterWidth,\n      marginBottom: theme.spacing(1),\n      backgroundColor: theme.palette.background.default,\n    },\n    content: {\n      wordWrap: 'break-word',\n      wordBreak: 'break-all',\n      width: `${Number.parseInt(ChapterWidth) - 32}px`,\n    },\n    contentIn: {\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      display: '-webkit-box',\n      '-webkitBoxOrient': 'vertical',\n      '-webkitLineClamp': 4,\n    },\n    contentOut: {\n      display: '-webkit-box',\n      '-webkitBoxOrient': 'vertical',\n      '-webkitLineClamp': 100,\n    },\n    readMore: {\n      float: 'right',\n      fontSize: '14px',\n    },\n  };\n};\n\nexport default genChapterCardStyle;\n","import React from 'react';\nimport clsx from 'clsx';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {genBaseStyle} from '../../utils/consts/theme';\nimport Card from '@material-ui/core/Card';\nimport {CornerButtonsConfig} from '../../utils/consts/PageConfig';\nimport {CornerButton} from '../../utils/Types';\n\nconst CornerButtons = () => {\n  const classes = makeStyles(theme => ({\n    ...genBaseStyle(theme),\n    root: {\n      position: 'fixed',\n      right: '10px',\n      bottom: '10px',\n      width: '50px',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    button: {\n      width: '40px',\n      height: '40px',\n      margin: '5px',\n      backgroundPosition: 'center',\n      backgroundRepeat: `no-repeat`,\n      '&:hover': {\n        // backgroundColor: \"#666\"\n      },\n    },\n  }))();\n  return (\n    <Card classes={{root: classes.root}}>\n      {CornerButtonsConfig.map((config: CornerButton, index: number) => {\n        let linkToMethod: any;\n        const {svg, onClick, linkTo = ''} = config;\n        if (linkTo) {\n          linkToMethod = () => {\n            window && window.open(linkTo);\n            return false;\n          };\n        }\n        return (\n          <div\n            key={index}\n            className={clsx(classes.button, classes.hover)}\n            style={{\n              backgroundImage: svg,\n            }}\n            onClick={linkTo ? linkToMethod : onClick}\n          ></div>\n        );\n      })}\n    </Card>\n  );\n};\n\nexport default CornerButtons;\n","import React, {useState, useEffect, useContext, useCallback} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Chapters from './Chapters';\nimport Sticks from '../../components/Sticks';\nimport Edit from '../../components/stick/Edit';\nimport AuthCenter from '../../components/stick/AuthCenter';\nimport NavList from '../../components/stick/NavList';\nimport Footer from '../../components/stick/Footer';\nimport CornerButtons from '../../components/common/CornerButtons';\nimport {requestContext} from '../../contexts/request';\nimport LandingStyle from './Landing.style';\nimport {len_query} from '../../utils/consts';\nconst useLandingReducer = (request: Function) => {\n  const [loading, setLoading] = useState(false);\n  const [chapters, setChapters]: any = useState([]);\n  const [offset, setOffset] = useState(0);\n\n  const fetchNewChapters = useCallback(\n    async (offset: number) => {\n      const newChapters: any = await request({limit: len_query, offset});\n      if (newChapters) {\n        setChapters((chapters: any[]) => [...chapters, ...newChapters]);\n      }\n      setLoading(false);\n    },\n    [request]\n  );\n  useEffect(() => {\n    setLoading(true);\n    fetchNewChapters(offset);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [offset]);\n  return {\n    loading,\n    chapters,\n    setOffset,\n  };\n};\nconst LandingContainer = () => {\n  const classes = makeStyles(LandingStyle)();\n  const {Chapter} = useContext(requestContext);\n  const {loading, chapters, setOffset} = useLandingReducer(Chapter.queryList);\n\n  useEffect(() => {\n    const _fetch = () => {\n      const clientHeight = document.documentElement.clientHeight;\n      const scrollHeight = document.documentElement.scrollHeight;\n      const scrollTop = document.documentElement.scrollTop;\n      if (scrollHeight === clientHeight + scrollTop) {\n        const newOffset = chapters.length;\n        setOffset(newOffset);\n      }\n    };\n    window.addEventListener('scroll', _fetch);\n    window.addEventListener('mousewheel', _fetch);\n    return () => {\n      window.removeEventListener('scroll', _fetch);\n      window.removeEventListener('mousewheel', _fetch);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [chapters]);\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.content}>\n        <Chapters loading={loading} chapters={chapters} actions={[]} />\n        <Sticks>\n          <Edit />\n          <AuthCenter />\n          <NavList />\n          <Footer />\n        </Sticks>\n      </div>\n      <CornerButtons />\n    </div>\n  );\n};\n\nexport default LandingContainer;\n"],"sourceRoot":""}